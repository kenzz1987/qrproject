# Railway deployment configuration

[build]
builder = "NIXPACKS"

[deploy]
startCommand = "python migrate_railway_db.py && gunicorn main:app --bind 0.0.0.0:$PORT"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Persistent volume for database
[[deploy.volumes]]
mountPath = "/app/data"

[deploy.env]
PORT = "8080"
FLASK_ENV = "production"
DATABASE_PATH = "/app/data/qr_codes.db"
